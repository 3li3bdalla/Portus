<!DOCTYPE html>
<html>
  <head>
    <title>RPM support for container-diff</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Google just recently released container-diff as an open-source project to share it with the containers community. The core use case of container-diff is to a...">

    <link href="/stylesheets/portus.css" type="text/css" rel="stylesheet" />
    <script src="/javascripts/dist/portus.min.js"    type="text/javascript" charset="utf-8"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="//oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="//oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Favicon for all different devices -->
<meta content="width=device-width, initial-scale=1" name="viewport" />
<link href="/images/favicon/apple-touch-icon-57x57.png" rel="apple-touch-icon" sizes="57x57" />
<link href="/images/favicon/apple-touch-icon-60x60.png" rel="apple-touch-icon" sizes="60x60" />
<link href="/images/favicon/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72" />
<link href="/images/favicon/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76" />
<link href="/images/favicon/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114" />
<link href="/images/favicon/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120" />
<link href="/images/favicon/apple-touch-icon-144x144.png" rel="apple-touch-icon" sizes="144x144" />
<link href="/images/favicon/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152" />
<link href="/images/favicon/apple-touch-icon-180x180.png" rel="apple-touch-icon" sizes="180x180" />
<link href="/images/favicon/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" />
<link href="/images/favicon/android-chrome-192x192.png" rel="icon" sizes="192x192" type="image/png" />
<link href="/images/favicon/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png" />
<link href="/images/favicon/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" />
<link href="/images/favicon/manifest.json" rel="manifest" />
<link color="#205683" href="/images/favicon/safari-pinned-tab.svg" rel="mask-icon" />
<link href="/images/favicon/favicon.ico" rel="shortcut icon" />
<meta content="Portus" name="apple-mobile-web-app-title" />
<meta content="Portus" name="application-name" />
<meta content="#da532c" name="msapplication-TileColor" />
<meta content="/images/favicon/mstile-144x144.png" name="msapplication-TileImage" />
<meta content="/images/favicon/browserconfig.xml" name="msapplication-config" />
<meta content="#205683" name="theme-color" />

  </head>
  <body>
    <header id="portus-header" class="portus-topbar">
  <div class="container-fluid">
    <i id="open_main_menu" class="fa fa-bars fa-2x visible-xs menu-sandwich"></i>

    <a href="/">
      <img class="pull-left img-responsive topbar-logo" src="/images/logo-header.png" alt="Logo on header">
    </a>
    <div class="pull-right hidden-xs">
      <a class="btn btn-link" href="/blog/index.html">Blog</a>
      <a class="btn btn-link" href="/features.html">Features</a>
      <a class="btn btn-link" href="/documentation.html">Documentation</a>
    </div>
    <div class="clearfix"></div>
  </div>
</header>

<div id="mobile-menu" class="visible-xs mobile-menu">
  <ul>
    <li><i class="fa fa-list-ul"></i><a class="btn btn-link" href="/features.html">Features</a></li>
    <li><i class="fa fa-book"></i><a class="btn btn-link" href="/documentation.html">Documentation</a></li>
    <li><i class="fa fa-newspaper-o"></i><a class="btn btn-link" href="/blog/index.html">Blog</a></li>
    <li><i class="fa fa-question-circle"></i><a class="btn btn-link" href="/docs/FAQ.html">FAQ</a></li>
  </ul>
</div>


    <div class="container">
      <div id="post-body" class="row">
        <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          <a href="/2017/12/19/container-diff.html">
          <h2 class="post-title">RPM support for container-diff</h2>

          
          </a>

          <p class="post-meta">
            Posted on December 19, 2017
            by Valentin Rothberg
          </p>

          <div class="post-body">
            <p>Google just recently released <a href="ihttps://github.com/GoogleCloudPlatform/container-diff">container-diff</a> as an open-source project to share it with the containers community. The core use case of container-diff is to analyze container images and report differences among them, including installed software packages with respect to their name, version and size, but it can also analyze files on the images’ file systems.</p>

<p>The release of container-diff instantly caught the attention of the Kubernetes Core Team at SUSE, as we consider it to be a useful tool for the broader containers community, but also for our own open source projects. Analyzing and comparing the differences among containers can be a useful extension to Portus, and we will add support for it in the near future.  While Portus’ <a href="http://port.us.org/2017/07/19/security-scanning.html">security scanning</a> informs users about security issues in images and ultimately protects them from using insecure software, container-diff can assist in managing installed software packages in a more general fashion. For instance, container-diff can be used in automation to find out if or where a given software package is installed, reveal differences among those images, and assist in containerized software management.</p>

<p>SUSE knows that real-world IT systems are heterogeneous environments where products from different vendors are used to fit best to each individual need. Hence, one of the main goals of Portus’ security scanning is to support not only the scanning of SUSE-based images via <a href="https://github.com/SUSE/zypper-docker">zypper-docker</a>, but to also to allow revealing vulnerabilities in non-SUSE based images, which we achieve by integrating <a href="https://github.com/coreos/clair">CoreOS clair</a>. Container-diff follows a similar philosophy and allows users to analyze images with software being installed by various package managers, such as apt for Debian-based images and pip for Python packages with more analyzers being added by the community. However, one missing piece in container-diff for SUSE was the support for RPM packages in order to support openSUSE and SUSE images, which has just been <a href="https://github.com/GoogleCloudPlatform/container-diff/commit/a039c5878b41c13a991c5e0d3a05052b9881ccc6">contributed to upstream</a> by SUSE’s Kubernetes Core Team.</p>

<p>At the moment of writing, container-diff ships two main functionalities. The first one is a basic analysis of the installed software packages in container images and tar archives. With the newly added RPM feature, analyzing an openSUSE image with container-diff can be achieved via <code class="highlighter-rouge">container-diff analyze --type rpm daemon://opensuse:tumbleweed</code>, which will load the <code class="highlighter-rouge">opensuse:tumbleweed</code> image from the local daemon, run the RPM analysis and report the results to the user:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-----RPM-----

Packages found in opensuse:tumbleweed:
NAME                            VERSION                      SIZE
-acl                            2.2.52                       216.6K
-bash                           4.4                          1M
-blog                           2.18                         128.9K
-bzip2                          1.0.6                        72.8K
...
</code></pre></div></div>

<p>Another core functionality of container-diff is to compare two specified container images or tar archives and output the software packages that are specific to one image, or common to both images. Comparing the <code class="highlighter-rouge">opensuse:42.2</code> with the <code class="highlighter-rouge">opensuse:42.3</code> image, for instance, can be achieved via <code class="highlighter-rouge">container-diff diff --type rpm daemon://opensuse:42.2 daemon://opensuse:42.3</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-----RPM-----

Packages found only in opensuse:42.2:
NAME             VERSION        SIZE
-binutils        2.29.1         33.6M

Packages found only in opensuse:42.3:
NAME                VERSION        SIZE
-blog               2.18           129.2K
-libncurses6        5.9            1021.2K

Version differences:
PACKAGE                                   IMAGE1 (opensuse:42.2)        IMAGE2 (opensuse:42.3)
-gpg-pubkey                               307e3d54, 0                   3dbdc284, 0
-libblkid1                                2.28, 263.1K                  2.29.2, 271.1K
-libfdisk1                                2.28, 353.6K                  2.29.2, 369.6K
-libgcc_s1                                6.2.1+r239768, 90.5K          7.2.1+r253435, 90.4K
-libgpg-error0                            1.13, 254.7K                  1.27, 495.6K
-libmount1                                2.28, 294.5K                  2.29.2, 298.5K
-libp11-kit0                              0.20.3, 565.9K                0.20.7, 286.8K
-libsmartcols1                            2.28, 150.2K                  2.29.2, 162.2K
-libsolv-tools                            0.6.26, 4.3M                  0.6.30, 4.3M
-libstdc++6                               6.2.1+r239768, 1.5M           7.2.1+r253435, 1.5M
-libtasn1                                 3.7, 120.7K                   4.9, 91.9K
-libtasn1-6                               3.7, 78.6K                    4.9, 74.6K
-libuuid1                                 2.28, 18.2K                   2.29.2, 18.2K
-libzypp                                  16.15.6, 7.4M                 16.17.4, 7.4M
-openSUSE-release                         42.2, 1.3M                    42.3, 587.2K
-openSUSE-release-mini                    42.2, 67B                     42.3, 67B
-p11-kit                                  0.20.3, 224.4K                0.20.7, 236.4K
-p11-kit-tools                            0.20.3, 182.2K                0.20.7, 194.2K
-systemd-presets-branding-openSUSE        0.3.0, 892B                   12.2, 3.6K
-util-linux                               2.28, 3.6M                    2.29.2, 3.7M
-zypper                                   1.13.32, 6.6M                 1.13.38, 6.7M
</code></pre></div></div>

<p>All in all, <a href="ihttps://github.com/GoogleCloudPlatform/container-diff">container-diff</a> is a great tool for containerized software management, and it integrates well in automation processes with new functionality being added by the community. Have fun, try it out, and contribute to upstream.</p>

          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="row row-0">
        <div class="text-center" lang="en">Created with <i class='fa fa-heart secondary-colour'></i> by the SUSE team</div>
      </div>
    </footer>
  </body>
</html>
