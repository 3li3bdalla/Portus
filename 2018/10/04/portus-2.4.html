<!DOCTYPE html>
<html>
  <head>
    <title>Portus 2.4 released!</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="It has been half a year more or less since we released Portus 2.3, and now it’stime to present to you a shiny new version. This version can be seen as aconti...">

    <link href="/stylesheets/portus.css" type="text/css" rel="stylesheet" />
    <script src="/javascripts/dist/portus.min.js"    type="text/javascript" charset="utf-8"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="//oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="//oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Favicon for all different devices -->
<meta content="width=device-width, initial-scale=1" name="viewport" />
<link href="/images/favicon/apple-touch-icon-57x57.png" rel="apple-touch-icon" sizes="57x57" />
<link href="/images/favicon/apple-touch-icon-60x60.png" rel="apple-touch-icon" sizes="60x60" />
<link href="/images/favicon/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72" />
<link href="/images/favicon/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76" />
<link href="/images/favicon/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114" />
<link href="/images/favicon/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120" />
<link href="/images/favicon/apple-touch-icon-144x144.png" rel="apple-touch-icon" sizes="144x144" />
<link href="/images/favicon/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152" />
<link href="/images/favicon/apple-touch-icon-180x180.png" rel="apple-touch-icon" sizes="180x180" />
<link href="/images/favicon/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" />
<link href="/images/favicon/android-chrome-192x192.png" rel="icon" sizes="192x192" type="image/png" />
<link href="/images/favicon/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png" />
<link href="/images/favicon/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" />
<link href="/images/favicon/manifest.json" rel="manifest" />
<link color="#205683" href="/images/favicon/safari-pinned-tab.svg" rel="mask-icon" />
<link href="/images/favicon/favicon.ico" rel="shortcut icon" />
<meta content="Portus" name="apple-mobile-web-app-title" />
<meta content="Portus" name="application-name" />
<meta content="#da532c" name="msapplication-TileColor" />
<meta content="/images/favicon/mstile-144x144.png" name="msapplication-TileImage" />
<meta content="/images/favicon/browserconfig.xml" name="msapplication-config" />
<meta content="#205683" name="theme-color" />

  </head>
  <body>
    <header id="portus-header" class="portus-topbar">
  <div class="container-fluid">
    <i id="open_main_menu" class="fa fa-bars fa-2x visible-xs menu-sandwich"></i>

    <a href="/">
      <img class="pull-left img-responsive topbar-logo" src="/images/logo-header.png" alt="Logo on header">
    </a>
    <div class="pull-right hidden-xs">
      <a class="btn btn-link" href="/blog/index.html">Blog</a>
      <a class="btn btn-link" href="/features.html">Features</a>
      <a class="btn btn-link" href="/documentation.html">Documentation</a>
    </div>
    <div class="clearfix"></div>
  </div>
</header>

<div id="mobile-menu" class="visible-xs mobile-menu">
  <ul>
    <li><i class="fa fa-list-ul"></i><a class="btn btn-link" href="/features.html">Features</a></li>
    <li><i class="fa fa-book"></i><a class="btn btn-link" href="/documentation.html">Documentation</a></li>
    <li><i class="fa fa-newspaper-o"></i><a class="btn btn-link" href="/blog/index.html">Blog</a></li>
    <li><i class="fa fa-question-circle"></i><a class="btn btn-link" href="/docs/FAQ.html">FAQ</a></li>
  </ul>
</div>


    <div class="container">
      <div id="post-body" class="row">
        <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          <a href="/2018/10/04/portus-2.4.html">
          <h2 class="post-title">Portus 2.4 released!</h2>

          
          </a>

          <p class="post-meta">
            Posted on October 4, 2018
            by Miquel Sabaté Solà
          </p>

          <div class="post-body">
            <p>It has been half a year more or less since we released Portus 2.3, and now it’s
time to present to you a shiny new version. This version can be seen as a
continuation of 2.3, since it simply deepens on some of the ideas introduced in
2.3, and it adds some nice improvements on top of it. We would like to highlight
the following changes:</p>

<h2 id="highlight">Highlight</h2>

<h3 id="configuration-changes">Configuration changes</h3>

<p>We have introduced quite some configurable options. Some of them are new, and
some other are merely additions to existing ones.</p>

<p>First of all, we have expanded the configuration for the mailer. We are now
providing more options so administrators have more flexibility in regards to how
they manage SSL/TLS. You can read the update documentation of the mailer
<a href="/docs/Configuring-Portus.html#email-configuration">here</a>.</p>

<p>Moreover, the <code class="highlighter-rouge">delete</code> option has now two new options:</p>

<ol>
  <li>You can allow contributors to delete namespaces/repositories/etc. with the
<code class="highlighter-rouge">delete.contributors</code> option (it’s set to <code class="highlighter-rouge">false</code> by default).</li>
  <li>The background process can now automatically remove images that are older
than a certain date, or that match a given tag. This is disabled by default
and it’s under the <code class="highlighter-rouge">delete.garbage_collector</code> option.</li>
</ol>

<p>You can read more about this
<a href="/docs/Configuring-Portus.html#delete-support">here</a>.</p>

<p>LDAP has also seen some updates. First of all, this release includes the changes
described in the <code class="highlighter-rouge">2.3.3</code> release when it comes to encryption, but it also adds
the new <code class="highlighter-rouge">timeout</code> option, in which you can tune the timeout in seconds for LDAP
lookups. You can read more about this
<a href="/docs/Configuring-Portus.html#ldap-support">here</a>.</p>

<p>We have also expanded the <code class="highlighter-rouge">user_permission</code> section, so administrators can
further tune what regular users can do. In more details:</p>

<ul>
  <li>We have added the <code class="highlighter-rouge">create_webhook</code> and the <code class="highlighter-rouge">manage_webhook</code> options, in order
to restrict webhook management (it is not restricted by default).</li>
  <li>We have added the <code class="highlighter-rouge">push_images</code> option, which accepts three possible values
under its <code class="highlighter-rouge">policy</code> key:
    <ul>
      <li><code class="highlighter-rouge">allow-teams</code>: the default policy, which works as how Portus used to work up
until now: owners and contributors of teams can push.</li>
      <li><code class="highlighter-rouge">allow-personal</code>: team policy is removed, non-admin users will only be able to
push into their personal namespaces.</li>
      <li><code class="highlighter-rouge">admin-only</code>: only administrators are allowed to push images.</li>
    </ul>
  </li>
</ul>

<p>You can read a summary of the <code class="highlighter-rouge">user_permission.push_images</code> option
<a href="/features/3_teams_namespaces_and_users.html#summary-with-all-the-options">here</a>.</p>

<p>Furthermore, you can now also tune the <code class="highlighter-rouge">pagination</code> rule being applied to all UI
elements which contain a list (e.g. the list of repositories).</p>

<p>Last but not least, we have increased the default value for the JWT token
expiration time, since it has been reported that the default value was just too
small.</p>

<h3 id="moved-portusctl-into-another-project">Moved portusctl into another project</h3>

<p>The <code class="highlighter-rouge">portusctl</code> tool has been rewritten and moved into its own
<a href="https://github.com/openSUSE/portusctl">project</a>. This has allowed us to expand
its possibilities, since now it will mainly interact with your Portus instance
through the API. The interface of this tool has changed quite a lot, but we kept
the ability to execute commands inside of your Portus instance (i.e. the
existing <code class="highlighter-rouge">exec</code> command). This new tool is already included in Docker images
based on this <code class="highlighter-rouge">2.4</code> version of Portus.</p>

<h3 id="changes-on-the-api">Changes on the API</h3>

<p>We would like to highlight the new <code class="highlighter-rouge">bootstrap</code> endpoint. This endpoint allows an
administrator of a Portus instance to create the first admin user of Portus and
to fetch an application token that has been created for this same user. This
way, you no longer need the UI in order to perform the first steps of your
instance.</p>

<p>Besides this, the Portus UI itself is using more and more this API, instead of
using a more traditional approach. Last but not least, we have changed existing
endpoints with more refined status codes, better response objects, etc. Make
sure to visit the <a href="/docs/API.html">API documentation</a>.</p>

<h3 id="bots">Bots</h3>

<p>We have introduced a new concept: bots. Bots are regular users that are created
by administrators, but with some subtleties:</p>

<ul>
  <li>A bot doesn’t own a personal namespace.</li>
  <li>A bot cannot login via web.</li>
  <li>A bot can only log in with application tokens (a token is generated
automatically when creating a bot).</li>
</ul>

<h3 id="namespace-deletion">Namespace deletion</h3>

<p>After much delay, we have implemented namespace deletion. You don’t have to
change anything from your configuration in order to have this enabled (it
depends on the same <code class="highlighter-rouge">delete.enabled</code> configuration).</p>

<h2 id="upgrading-from-23">Upgrading from 2.3</h2>

<p>As always, you should perform a backup of all your data before doing anything at
all. Afterwards, review the configuration changes that have occurred, just in
case you’d like to tune some of these options. Finally, you can run again your
deployment setup, since the <a href="https://hub.docker.com/r/opensuse/portus/">official Docker
image</a> will take care of everything
at boot time.</p>

<p><strong>Important note</strong>: the <code class="highlighter-rouge">latest</code> tag from the Docker image is already pointing
to the <code class="highlighter-rouge">2.4</code> release. If you’d like to stay on the <code class="highlighter-rouge">2.3</code> branch for a little
while, make sure to change the label to <code class="highlighter-rouge">2.3</code> (or <code class="highlighter-rouge">2.3.6</code>, the latest
patch-level release).</p>

<h3 id="whats-next">What’s next</h3>

<p>We have already documented the <a href="/docs/release-schedule.html">release process</a>
for 2.5. You can take a look at our planned features for 2.5
<a href="https://github.com/SUSE/Portus/projects/3">here</a>.</p>

          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="row row-0">
        <div class="text-center" lang="en">Created with <i class='fa fa-heart secondary-colour'></i> by the SUSE team</div>
      </div>
    </footer>
  </body>
</html>
